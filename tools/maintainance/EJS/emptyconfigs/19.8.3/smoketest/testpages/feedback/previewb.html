<!DOCTYPE html>
<html>
  <head>
    <title>Survey Preview</title>
    <script src="https://code.jquery.com/jquery-2.1.3.min.js" type="text/javascript"></script>
    <script>
      function setFrameMode(md) {
        var cfg = encodeURIComponent( JSON.stringify({
            "devices" : {
              "overridesEnabled": true,
              "desktop" : {
                "fbsize": "large",
                "icon": "chat.png"
              },
              "tablet": {
                "fbtype": "none"
              },
              "mobile": {
              }
            },
            "icon":"aspark100.png",
            "delay":100,
            "template":"default",
            "label":"Feedback",
            "fblocation":"bottomleft",
            "popup":false,
            "fbtype":"badge",
            "disabled":false,
            "fbanimate":true,
            "fbfixed":true,
            "fbdirection":"vertical",
            "mid":"wCOm1asTGMFARz1G92VJP4yzQUGE3U9w",
            "fbsize":"medium"
          }) ),
          newurl = '/preview/previewbadge.html?previewbadgemode=' + md + '#fscommand=feedbackpreview#rnd=' + Math.random() + '&cfg=' + cfg;
        console.log("The new cfg is ", cfg, " The new url is ", newurl);
        switch (md) {
          case "desktop":
            $("#prevFrame").css({
              'width': 800
            }).attr({
              'src': newurl
            });
          break;
          case "tablet":
            $("#prevFrame").css({
              'width': 600
            }).attr({
              'src': newurl
            });
          break;
          case "mobile":
            $("#prevFrame").css({
              'width': 330
            }).attr({
              'src': newurl
            });
          break;
        }
        return false;
      }
    </script>
  </head>
  <body>
    <h1>Badge Preview Holder</h1>
    <p>
      <a href="#" onclick="return setFrameMode('desktop');">Desktop</a> |
      <a href="#" onclick="return setFrameMode('tablet');">Tablet</a> |
      <a href="#" onclick="return setFrameMode('mobile');">Mobile</a>
    </p>
    <p>
      <iframe id="prevFrame" src="about:blank" style="width:600px; height:500px;"></iframe>
    </p>
    <script>
      $(document).ready(function () {
        setFrameMode('desktop');
      });
    </script>
  </body>
</html>