/***************************************
* @preserve
* ForeSee Web SDK: Survey Admin Module
* Built April 27, 19 21:26:21
* Code version: 19.7.6
* Template version: 19.7.6
***************************************/
_fsDefine(["require","fs",_fsNormalizeUrl("$fs.utils.js"),"triggerconfig"],function(e,fs,utils,u){if(utils.registerProduct("foresee",u),u&&u.surveydefs)for(var t=0;t<u.surveydefs.length;t++)fs.isString(u.surveydefs[t])&&(u.surveydefs[t]=utils.compile(utils.b64DecodeUnicode(u.surveydefs[t])));var r=function(e){this.browser=e,this.stg=utils.getGeneralStorage(e)};r.prototype.loadResources=function(s){this.stg.ready.subscribe(function(){var e=fs.makeURI("$templates/trigger/admintools/main.css"),t=fs.makeURI("$templates/trigger/admintools/admin.html"),r=!1,i=!1,n=function(){r&&i&&s&&s()};utils.loadCSS(e,function(e){r=!0,n()},null,this.browser),new utils.JSONP({success:function(e){i=!0,this.template=e,n()}.bind(this)}).get(t,"templates_trigger_admintools_")}.bind(this),!0,!0)},r.prototype._applyValues=function(){var e,t={sp:{},lf:{}},r=document.querySelectorAll(".acsSPOverride"),i=document.querySelectorAll(".acsLFOverride");for(e=0;e<r.length;e++){var n=r[e].id,s=r[e].value,o=n.replace("_spovr_","");s&&0<s.length&&(t.sp[o]={reg:parseInt(s,10),outreplaypool:parseInt(s,10)})}for(e=0;e<i.length;e++){var l=i[e].id,a=i[e].value,c=l.replace("_lfovr_","");a&&0<a.length&&(t.lf[c]=parseInt(a,10))}var d=!1;document.getElementById("acsOverridePooling").checked&&(d=!0),t.pooloverride=d,this.stg.set("ovr",JSON.stringify(t),null,!0,function(){this.writeMessage("Override saved.")}.bind(this))},r.prototype.writeMessage=function(e){var t=document.getElementById("fsMessage");clearTimeout(this.wmTimeout),t&&(t.innerHTML=e||"",this.wmTimeout=setTimeout(function(){t.innerHTML=""},3e3))},r.prototype.render=function(){document.title="ForeSee Survey Administration Tool";var e,t,r,i=fs.ext(this.browser,{siteLogo:fs.config.staticUrl+"/logos/foresee/foresee.svg"},{defs:u.surveydefs}),n=(e=this.template,t=i,r=new window.Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"),t?r(t):r);document.body.innerHTML=n;var s=document.getElementById("acsSetValues");s&&utils.Bind(s,"click",function(e){utils.preventDefault(e),this.stg.reset(function(){this._applyValues()}.bind(this),null,!0)}.bind(this));var o=document.getElementById("acsClearValues");o&&utils.Bind(o,"click",function(e){utils.preventDefault(e),this.stg.reset(function(){this.writeMessage("State cleared.")}.bind(this),function(){this.writeMessage("Failed to clear state.")}.bind(this));for(var t=document.querySelectorAll(".acsSPOverride, .acsLFOverride"),r=0;r<t.length;r++)t[r].value="";document.getElementById("acsOverridePooling").checked=!1}.bind(this));var l=document.getElementById("acsReturnToSite");l&&utils.Bind(l,"click",function(e){utils.preventDefault(e);var t=window.location.href+"";window.location=t.substr(0,t.indexOf("#"))}.bind(this));var a=this.stg.get("ovr");if(a){for(var c in a=JSON.parse(a),document.getElementById("acsOverridePooling").checked=a.pooloverride,a.sp)try{document.getElementById("_spovr_"+c).value=a.sp[c].reg}catch(e){}for(var d in a.lf)try{document.getElementById("_lfovr_"+d).value=a.lf[d]}catch(e){}}},fs.domReady(function(){var t=new utils.Browser;t.ready.subscribe(function(){var e=new r(t);e.loadResources(function(){e.render()}.bind(this))},!0,!0)})});